(function(){window.portfolio=angular.module("portfolio",["ngRoute","ngTouch"]).run(function(){return log("application started.")}).config(function($routeProvider,$locationProvider){return $routeProvider.when("/post/:postId",{templateUrl:"partials/post.html",controller:"Post"}).otherwise({templateUrl:"/partials/home.html"}),$locationProvider.hashPrefix("!")}).controller("Header",function($scope,$location,scrollToAnchor){return console.log("header controller loaded"),$scope.scrollTo=function(id){return"/"===$location.path()?scrollToAnchor.go(id):(scrollToAnchor.push(id),$location.path("/"))}}).controller("Tags",function(){return log("tags controller loaded.")}).controller("Projects",function($scope,$http,scrollToAnchor){return this.stuff="this is accessible stuff",$http.get("json/projects.json").success(function(projects){return $scope.projects=projects}),$scope.$watch("projects",function(val){return val?scrollToAnchor.go():void 0}),$scope.selectProject=function(project){return $scope.selectedProject=project},$scope.closeImageModal=function(){return $scope.selectedProject=null},$scope.selectVideo=function(video){return $scope.selectedVideo=video},$scope.closeVideoModal=function(){return $scope.selectedVideo=null}}).controller("Blog",function($scope,$http){return $http.get("json/blog.json").success(function(posts){return $scope.posts=posts})}).controller("Post",function($scope,$routeParams,$http){return $scope.postId=$routeParams.postId,$http.get("json/blog.json").success(function(posts){return $scope.post=posts[$routeParams.postId]})}).factory("monitorScroll",function(){var $w;return $w=$(window),{scroll:function(cb){return $w.scroll(function(){return _.isFunction(cb)?cb($w.scrollTop()):void 0})}}}).directive("onScroll",function(monitorScroll){return{restrict:"A",scope:{},link:function(scope,elem,attrs){return monitorScroll.scroll(function(vScroll){var factor;return factor=attrs.factor||1,elem.css(attrs.onScroll,vScroll*factor)})}}}).directive("imageSlider",function(){return{templateUrl:"partials/slider-images.html",scope:{images:"=imageSlider",clickImage:"&",currentImage:"=",imageDir:"@"},controller:function($scope){var getCurrentImageIndex;return $scope.currentImage=$scope.images[0],getCurrentImageIndex=function(){return $scope.images.indexOf($scope.currentImage)},$scope.nextImage=function(){return $scope.nextDisabled?void 0:$scope.currentImage=$scope.images[getCurrentImageIndex()+1]},$scope.prevImage=function(){return $scope.prevDisabled?void 0:$scope.currentImage=$scope.images[getCurrentImageIndex()-1]},$scope.$watch("currentImage",function(){return $scope.nextDisabled=$scope.prevDisabled=!1,getCurrentImageIndex()===$scope.images.length-1&&($scope.nextDisabled=!0),0===getCurrentImageIndex()?$scope.prevDisabled=!0:void 0})}}}).directive("imageModal",function(){return{restrict:"A",templateUrl:"partials/image-modal.html",scope:{images:"=imageModal",currentImage:"=",imageDir:"@"},controller:function($scope){return $scope.clickImage=function(currentImage){var nextIndex;return nextIndex=1+$scope.images.indexOf(currentImage),nextIndex===$scope.images.length&&(nextIndex=0),$scope.currentImage=$scope.images[nextIndex]}}}}).directive("videoModal",function(){return{restrict:"A",templateUrl:"partials/video-modal.html",scope:{video:"=videoModal",videoDir:"@"},controller:function($scope,$sce){return $scope.$watchCollection("[videoDir, video]",function(newValues){return $scope.trustedVideoUrl=$sce.trustAsResourceUrl(newValues[0]+newValues[1])})}}}).directive("tags",function(tagBank){return{restrict:"A",scope:{tags:"=",showTags:"@"},templateUrl:"partials/directives/tags.html",controller:function($scope){return $scope.$watch("tags",function(tags){return tags?$scope.tagList=_.map(tags,function(tag){var foundTag;return foundTag=tagBank.find(tag),foundTag||(foundTag=tagBank.add(tag)),foundTag}):void 0}),$scope.showTags&&($scope.tagList=tagBank.savedTags),$scope.activateTag=function(tag){return tag.selected=tag.selected?!1:!0}}}}).directive("code",function(){return{restrict:"E",compile:function(e){return hljs.highlightBlock(e[0])}}}).directive("disqus",function($window){return{restrict:"A",templateUrl:"partials/directives/disqus.html",link:function(scope,elem,attrs){var loadDisqus;return $window.disqus_shortname="taylorcode",loadDisqus=function(){return function(){return this.dsq=document.createElement("script"),this.dsq.type="text/javascript",this.dsq.async=!0,this.dsq.src="//"+this.disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(this.dsq)}($window)},null!=attrs.disqusTitle?scope.$watch(attrs.disqusTitle,function(title){return title?($window.disqus_title=title,loadDisqus()):void 0}):loadDisqus()}}}).factory("tagBank",function(){var savedTags;return savedTags=[],{find:function(tag){var foundTag;return foundTag=void 0,_.each(this.savedTags,function(t){return t.tag===tag?foundTag=t:void 0}),foundTag},add:function(tag){var newTag;return newTag={tag:tag},this.savedTags.push(newTag),newTag},savedTags:[]}}).factory("scrollToAnchor",function($location,$anchorScroll,$timeout){return{go:function(id){var old;return id||(id=this.pop()),id?(old=$location.hash(),$timeout(function(){return $location.hash(id),$anchorScroll(),$location.hash(old)},0)):void 0},push:function(id){return this.saved=id},pop:function(){var val;return val=this.saved,delete this.saved,val}}})}).call(this);